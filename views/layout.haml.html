!!! XML
!!! strict
%html{ xmlns: "http://www.w3.org/1999/xhtml", "xml:lang": "en" "lang": "en"}
  %head
    %meta{"http-equiv":"content-type", "content": "text/html;charset=UTF-8"}
    %title Geeks
    %link{"type": "text/css", "rel": "stylesheet", "href":/js/development-bundle/themes/base/ui.all.css"}
    %link{"type": "text/css", "rel": "stylesheet", "href":"/js/development-bundle/themes/sunny/ui.all.css"}
    %link{"type": "text/css", "rel": "stylesheet", "href":"/css/sunny/jquery-ui-1.7.2.custom.css"}
  %body
    %p
      %ul
        %li
          %a.tool.as_dialog{"href":"/geek/new"} new geek
    = body
    #events
    %p footer.
    %script{"type": "text/javascript", "src":"js/jquery-1.4.js"}
    %script{"type": "text/javascript", "src":"js/jquery-ui-1.7.2.custom.min.js"}
    %script{"type": "text/javascript", "src":"js/dialog.js"}
    :javascript
        // Events chanel
       function poll(){
            $.getJSON('/events', function(geek){
                $('#events').append('<div>' + geek.name + '</div>');
                poll();
            })
        };
        poll();
    :javascript
        // every link with a classname 'as_dialog' will open as dialog on click.
        $(document).ready(
            function(){
                $('a.as_dialog')
                .live('click',
                    function(event){
                        event.preventDefault();
                        (new GeeksDialog($(this).attr('href'))).show();
                });
        });
